import React from "react";
import { FaHome, FaUsers, FaComments, FaPlusSquare, FaCog } from "react-icons/fa";
import { Avatar, AvatarFallback, AvatarImage } from "@/components/ui/avatar";

const SidebarIcon = ({ icon, label, active }) => (
  <div className={`flex items-center gap-2 p-2 rounded-xl cursor-pointer ${active ? "bg-orange-100 text-orange-500" : "hover:bg-gray-100"}`}>
    {icon}
    <span className="hidden md:inline text-sm font-medium">{label}</span>
  </div>
);

const FriendList = ({ friends }) => (
  <div className="mt-6">
    <h3 className="text-xs text-gray-500 uppercase px-2">Amigos</h3>
    <ul className="mt-2 space-y-1">
      {friends.map((f, idx) => (
        <li key={idx} className="px-2 text-sm text-gray-700 hover:text-orange-500 cursor-pointer">{f}</li>
      ))}
      <li className="px-2 text-sm text-orange-500 cursor-pointer">Ver mais</li>
    </ul>
  </div>
);

const ChatList = ({ chats }) => (
  <div className="flex flex-col">
    <div className="flex space-x-2 overflow-x-auto px-4 py-2">
      {chats.slice(0, 6).map((c, idx) => (
        <Avatar key={idx}>
          <AvatarImage src={c.image} />
          <AvatarFallback>{c.name[0]}</AvatarFallback>
        </Avatar>
      ))}
    </div>
    <div className="px-4">
      {chats.map((c, idx) => (
        <div key={idx} className="py-2 border-b cursor-pointer hover:bg-gray-50">
          <div className="font-semibold text-sm">{c.name}</div>
          <div className="text-xs text-gray-500 truncate">{c.lastMessage}</div>
          <div className="text-[10px] text-gray-400">{c.date}</div>
        </div>
      ))}
    </div>
  </div>
);

const ChatPlaceholder = () => (
  <div className="h-full flex flex-col items-center justify-center text-center text-gray-400">
    <h2 className="text-2xl font-semibold text-orange-500">synergy</h2>
    <p className="mt-2 text-sm">Suas Mensagens</p>
    <p className="text-xs">Envie fotos e mensagens privadas para um amigo ou grupo</p>
  </div>
);

export default function MessagingApp() {
  const friends = ["Andrew Parker", "Bruna Gomes", "Mariana Ferreira", "Fernando Costa", "João Neves"];
  const chats = [
    { name: "Andrew Parker", lastMessage: "Claro, envio ainda hoje!", date: "Qua", image: "https://i.pravatar.cc/40?img=1" },
    { name: "Bruna Gomes", lastMessage: "Você vem no Porto?", date: "Sex", image: "https://i.pravatar.cc/40?img=2" },
    { name: "Mariana Ferreira", lastMessage: "Tomara que sim!", date: "Qui", image: "https://i.pravatar.cc/40?img=3" },
    { name: "Fernando Costa", lastMessage: "Amanha vai chover.", date: "Ter", image: "https://i.pravatar.cc/40?img=4" },
    { name: "João Neves", lastMessage: "São notícias de aprendizado...", date: "Seg", image: "https://i.pravatar.cc/40?img=5" },
    { name: "Felipe Voss", lastMessage: "Vou checar...", date: "Qui", image: "https://i.pravatar.cc/40?img=6" },
  ];

  return (
    <div className="flex h-screen text-gray-800">
      <aside className="w-64 bg-white p-4 border-r hidden md:block">
        <div className="font-bold text-xl text-orange-500 mb-6">synergy</div>
        <nav className="space-y-2">
          <SidebarIcon icon={<FaHome />} label="Página Inicial" />
          <SidebarIcon icon={<FaUsers />} label="Comunidade" />
          <SidebarIcon icon={<FaComments />} label="Conversas" active />
          <SidebarIcon icon={<FaPlusSquare />} label="Criar Publicação" />
          <SidebarIcon icon={<FaCog />} label="Configurações" />
        </nav>
        <FriendList friends={friends} />
      </aside>

      <main className="flex flex-1">
        <section className="w-[320px] border-r overflow-y-auto">
          <ChatList chats={chats} />
        </section>
        <section className="flex-1">
          <ChatPlaceholder />
        </section>
      </main>
    </div>
  );
}